/**
 * @file Firestore Security Rules
 * @core_philosophy This ruleset grants public read access to all data while restricting write access. Since there is no authentication, anyone can read any document. No write operation is allowed.
 * @data_structure The database consists of four top-level collections: `rfps`, `contractors`, `metro_codes`. The `rfps` collection has a subcollection called `proposals`.
 * @key_security_decisions
 *   - All read operations (get, list) are publicly accessible.
 *   - All write operations (create, update, delete) are denied.
 *   - There is no authentication or user-based authorization in this ruleset.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read RFPs, but nobody can create, update, or delete them.
     * @path /rfps/{rfpId}
     * @allow (get, list) - Any user can read the rfps.
     * @deny (create, update, delete) - No one can create, update, or delete rfps.
     * @principle Grants public read access and denies all write operations.
     */
    match /rfps/{rfpId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read proposals, but nobody can create, update, or delete them.
     * @path /rfps/{rfpId}/proposals/{proposalId}
     * @allow (get, list) - Any user can read the proposals.
     * @deny (create, update, delete) - No one can create, update, or delete proposals.
     * @principle Grants public read access and denies all write operations.
     */
    match /rfps/{rfpId}/proposals/{proposalId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read contractors, but nobody can create, update, or delete them.
     * @path /contractors/{contractorId}
     * @allow (get, list) - Any user can read the contractors.
     * @deny (create, update, delete) - No one can create, update, or delete contractors.
     * @principle Grants public read access and denies all write operations.
     */
    match /contractors/{contractorId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read metro codes, but nobody can create, update, or delete them.
     * @path /metro_codes/{metroCodeId}
     * @allow (get, list) - Any user can read the metro codes.
     * @deny (create, update, delete) - No one can create, update, or delete metro codes.
     * @principle Grants public read access and denies all write operations.
     */
    match /metro_codes/{metroCodeId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}