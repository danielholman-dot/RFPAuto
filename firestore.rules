rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Explicitly allow access to each top-level collection for any authenticated user.
    
    match /users/{userId} {
      allow read, write: if request.auth != null;
    }

    match /rfps/{rfpId} {
      allow read, write: if request.auth != null;
    }
    
    // Ensure subcollections are also covered
    match /rfps/{rfpId}/{subcollection}/{documentId} {
      allow read, write: if request.auth != null;
    }

    match /contractors/{contractorId} {
      allow read, write: if request.auth != null;
    }

    match /metro_codes/{metroId} {
      allow read, write: if request.auth != null;
    }
    
    match /RFP_Weighting_evaluation/{rfpId} {
      allow read, write: if request.auth != null;
    }
  }
}
